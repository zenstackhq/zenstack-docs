---
title: TanStack Start
description: Adapter for integrating with TanStack Start
sidebar_position: 4
---

import ErrorHandling from './_error-handling.md';
import AdapterOptions from './_options.mdx';
import PackageInstall from '../../_components/PackageInstall';
import Intro from './_intro.mdx';

# TanStack Start Adapter

[TanStack Start](https://tanstack.com/start) is a full-stack React framework powered by TanStack Router, offering full-document SSR, streaming, server functions, and bundling capabilities.

<Intro module='@zenstackhq/server/tanstack-start' framework='TanStack Start' url="https://tanstack.com/start" />

This feature is contributed by [@digoburigo](https://github.com/digoburigo).

### Installation

<PackageInstall dependencies={['@zenstackhq/server']} />

### Mounting the API

You can use the `TanStackStartHandler` to create a handler for your API routes. TanStack Start uses file-based routing, so you'll typically create a catch-all route to handle all CRUD operations:

```ts title='app/routes/api/$.ts'
import { createFileRoute } from '@tanstack/react-router'
import { TanStackStartHandler } from '@zenstackhq/server/tanstack-start'
import { RPCApiHandler } from '@zenstackhq/server/api';
import { getSessionUser } from '~/auth';
import { client } from '~/db';
import { schema } from '~/zenstack/schema';

// create an enhanced Prisma client with user context
function getPrisma() {
    return enhance(prisma, { user: getSessionUser() });
}

const handler = TanStackStartHandler({
    apiHandler: new RPCApiHandler({ schema }),
    // getSessionUser extracts the current session user from the request, its
    // implementation depends on your auth solution
    getClient: (request) => client.$setAuth(getSessionUser(request)),
})

export const Route = createFileRoute('/api/$')({
    server: {
        handlers: {
            GET: handler,
            POST: handler,
            PUT: handler,
            PATCH: handler,
            DELETE: handler,
        }
    }
})
```

The TanStack Start handler takes the following options to initialize:

<AdapterOptions getClient='(request: Request) => ClientContract<Schema> | Promise<ClientContract<Schema>>' />

<ErrorHandling />

