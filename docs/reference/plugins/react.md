---
description: Plugin for generating React data query hooks
sidebar_position: 1
---

# @zenstackhq/react

The `@zenstack/react` plugin generates React hooks that call into the CRUD services provided by packages like [`@zenstack/next`](./next).

The hooks syntactically mirror the APIs of a standard Prisma client, including the function names and shapes of parameters (hooks directly use types generated by Prisma). At runtime, the hooks use [SWR](https://swr.vercel.app/) to query and mutate, so you can enjoy its features like caching, automatic revalidation, etc.

## Options

| Name   | Type   | Description      | Required |
| ------ | ------ | ---------------- | -------- |
| output | String | Output directory | Yes      |

## Example

Here's an example with a blogging app:

```prisma title='/schema.zmodel'
plugin reactHooks {
  provider = '@zenstackhq/react'
  output = "./src/lib/hooks"
}

model User {
  id            String    @id @default(cuid())
  email         String
  posts         Post[]

  // everyone can signup, and user profile is also publicly readable
  @@allow('create,read', true)
}

model Post {
  id        String @id @default(cuid())
  title     String
  published Boolean @default(false)
  author    User @relation(fields: [authorId], references: [id])
  authorId  String

  // author has full access
  @@allow('all', auth() == author)

  // logged-in users can view published posts
  @@allow('read', auth() != null && published)
}
```

```tsx title='/src/components/posts.tsx'
import type { Post } from '@prisma/client';
import { usePost } from '../lib/hooks';

// post list component
const Posts = ({ userId }: { userId: string }) => {
    // Post crud hooks
    const { findMany, create } = usePost();

    // list all posts that're visible to the current user, together with their authors
    const { data: posts } = findMany({
        include: { author: true },
        orderBy: { createdAt: 'desc' },
    });

    async function onCreatePost() {
        await create({
            data: {
                title: 'My awesome post',
                authorId: userId,
            },
        });
    }

    return (
        <>
            <button onClick={onCreatePost}>Create</button>
            <ul>
                {posts?.map((post) => (
                    <li key={post.id}>
                        {post.title} by {post.author.email}
                    </li>
                ))}
            </ul>
        </>
    );
};
```
