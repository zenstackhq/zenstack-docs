---
description: Plugin for generating tRPC data query routes
sidebar_position: 7
---

# @zenstackhq/trpc

The `@zenstack/trpc` plugin generates a [tRPC router](https://trpc.io/docs/router) to make database CRUD calls. You can use it directly as your main router or merge it with other routers to create a more complex setup. The router syntactically mirrors the APIs of a standard Prisma client, including the function names and shapes of parameters (hooks directly use types generated by Prisma).

This plugin is based on [prisma-trpc-generator](https://github.com/omar-dulaimi/prisma-trpc-generator). Thanks to [Omar Dulaimi](https://github.com/omar-dulaimi) for making this happen!

## Options

| Name   | Type   | Description      | Required | Default |
| ------ | ------ | ---------------- | -------- | ------- |
| output | String | Output directory (relative to the path of ZModel) | Yes      | |
| generateModelActions | String, String[] | Array or comma separated string for actions to generate for each model: `create`, `findUnique`, `update`, etc. | No      | All supported Prisma actions |

## Example

Here's an example with a blogging app:

```prisma title='/schema.zmodel'
plugin trpc {
  provider = '@zenstackhq/trpc'
  output = 'server/routers/generated'
  generateModelActions = 'create,update,findUnique,findMany'
}

model User {
  id            String    @id @default(cuid())
  email         String
  posts         Post[]

  // everyone can signup, and user profile is also publicly readable
  @@allow('create,read', true)
}

model Post {
  id        String @id @default(cuid())
  title     String
  published Boolean @default(false)
  author    User @relation(fields: [authorId], references: [id])
  authorId  String

  // author has full access
  @@allow('all', auth() == author)

  // logged-in users can view published posts
  @@allow('read', auth() != null && published)
}
```

```ts title='/server/routers/_app.ts'
import { createRouter as createCRUDRouter } from './generated/routers';
import { initTRPC } from '@trpc/server';
import { type Context } from '../context';

const t = initTRPC.context<Context>().create();

export const appRouter = createCRUDRouter(t.router, t.procedure);
export type AppRouter = typeof appRouter;
```

Check out the [Using With tRPC](/docs/guides/trpc) guide for more details about using ZenStack in a tRPC project.
