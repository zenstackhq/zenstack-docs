---
title: Next.js
description: Adapter for integrating with Next.js
sidebar_position: 1
---

import ErrorHandling from './_error-handling.md';
import AdapterOptions from './_options.mdx';
import UsingAPI from './_using-api.mdx';

# Next.js Server Adapter

The `@zenstackhq/server/next` module provides a quick way to install API endpoints onto a [Next.js](https://nextjs.org/) project for database CRUD operations. Combined with ZenStack's power of enhancing Prisma with access policies, it's surprisingly simple to achieve a secure data backend without manually coding it.

### Mounting the API

You can use it to create a request handler in an API endpoint like:

```ts title='/src/pages/api/model/[...path].ts'
import { NextRequestHandler } from '@zenstackhq/server/next';
import type { NextApiRequest, NextApiResponse } from 'next';
import { withPresets } from '@zenstackhq/runtime';
import { getSessionUser } from '../../../lib/auth.ts';

// create an enhanced Prisma client with user context
function getPrisma(req: NextApiRequest, res: NextApiResponse) {
    // getSessionUser extracts the current session user from the request, its
    // implementation depends on your auth solution
    return withPresets({ user: getSessionUser(req, res) });
}

// create the request handler with the `getPrisma` hook
export default NextRequestHandler({ getPrisma });
```

The Next.js API route handler takes the following options to initialize:

<AdapterOptions getPrisma='(req: NextApiRequest, res: NextApiResponse) => unknown | Promise<unknown>' />

### Using the API

<UsingAPI />

<ErrorHandling />

### Fully working example

You can find a fully working example [here](https://github.com/zenstackhq/docs-tutorial-nextjs).
